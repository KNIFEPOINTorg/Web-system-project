<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LFLshop Dashboard - Edit Product</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="../css/action-buttons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard">
        <aside class="sidebar">
            <div class="logo">
                <h2>LFLshop</h2>
            </div>
            <nav class="nav-menu">
                <a href="index.html" class="nav-item">
                    <span class="nav-icon">üè†</span>
                    Home
                </a>
                <a href="orders.html" class="nav-item">
                    <span class="nav-icon">üì¶</span>
                    Orders
                </a>
                <a href="products.html" class="nav-item">
                    <span class="nav-icon">üìã</span>
                    List Your Product
                </a>
                <a href="listings.html" class="nav-item active">
                    <span class="nav-icon">üë•</span>
                    My Listing
                </a>
                <a href="analytics.html" class="nav-item">
                    <span class="nav-icon">üìä</span>
                    Analytics
                </a>
                <a href="settings.html" class="nav-item">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    Settings
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <span class="breadcrumb">LFLshop</span>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <input type="text" placeholder="Search">
                        <span class="search-icon">üîç</span>
                    </div>
                    <div class="notifications" onclick="toggleNotifications()">
                        <span class="notification-icon">üîî</span>
                        <span class="notification-badge">3</span>
                        <div id="notificationDropdown" class="notification-dropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button class="mark-all-read" onclick="markAllAsRead()">Mark all as read</button>
                            </div>
                            <div class="notification-list">
                                <div class="notification-item unread">
                                    <div class="notification-icon-small">üì¶</div>
                                    <div class="notification-content">
                                        <div class="notification-title">New Order Received</div>
                                        <div class="notification-text">Order #1237 from Sarah Johnson</div>
                                        <div class="notification-time">2 minutes ago</div>
                                    </div>
                                </div>
                                <div class="notification-item unread">
                                    <div class="notification-icon-small">ÔøΩÔøΩÔøΩ</div>
                                    <div class="notification-content">
                                        <div class="notification-title">Product Review</div>
                                        <div class="notification-text">New 5-star review for Handwoven Basket</div>
                                        <div class="notification-time">1 hour ago</div>
                                    </div>
                                </div>
                                <div class="notification-item unread">
                                    <div class="notification-icon-small">üí∞</div>
                                    <div class="notification-content">
                                        <div class="notification-title">Payment Received</div>
                                        <div class="notification-text">$125.00 payment confirmed</div>
                                        <div class="notification-time">3 hours ago</div>
                                    </div>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#" class="view-all-link">View all notifications</a>
                            </div>
                        </div>
                    </div>
                    <div class="help-icon">
                        <span>‚ùì</span>
                    </div>
                    <div class="user-avatar">
                        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face" alt="User">
                    </div>
                </div>
            </header>

            <div class="page-content">
                <div class="page-header">
                    <a href="listings.html" class="back-button">‚Üê Back to My Listings</a>
                    <div class="page-header-content">
                        <div class="page-title-section">
                            <h1>Edit Product</h1>
                            <p>Update your product information and settings</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline" onclick="previewProduct()">
                                <i class="fas fa-eye"></i>
                                Preview
                            </button>
                            <button class="btn btn-danger" onclick="deleteProduct()">
                                <i class="fas fa-trash"></i>
                                Delete Product
                            </button>
                        </div>
                    </div>
                </div>

                <div class="edit-product-container">
                    <div class="edit-form-section">
                        <form id="editProductForm" class="product-form">
                            <div class="form-section">
                                <h2>Basic Information</h2>
                                <div class="form-group">
                                    <label>Product Name *</label>
                                    <input type="text" id="productName" value="Handwoven Basket" required>
                                </div>
                                <div class="form-group">
                                    <label>SKU</label>
                                    <input type="text" id="productSku" value="HB001" readonly>
                                    <small>SKU cannot be changed after creation</small>
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea id="productDescription" rows="4">Beautiful handwoven basket made from natural materials. Perfect for storage or decoration.</textarea>
                                </div>
                                <div class="form-group">
                                    <label>Category</label>
                                    <select id="productCategory">
                                        <option value="home-decor" selected>Home Decor</option>
                                        <option value="clothing">Clothing</option>
                                        <option value="accessories">Accessories</option>
                                        <option value="art">Art & Crafts</option>
                                        <option value="food">Food & Beverages</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>Product Options</h2>
                                <div class="form-group">
                                    <label>Size</label>
                                    <select id="productSize">
                                        <option value="small">Small</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="large">Large</option>
                                        <option value="extra-large">Extra Large</option>
                                        <option value="one-size">One Size</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Color</label>
                                    <div class="color-picker-container">
                                        <div class="color-options">
                                            <label class="color-option">
                                                <input type="radio" name="color" value="brown" checked>
                                                <span class="color-swatch" style="background-color: #8b4513;"></span>
                                                <span class="color-name">Brown</span>
                                            </label>
                                            <label class="color-option">
                                                <input type="radio" name="color" value="beige">
                                                <span class="color-swatch" style="background-color: #f5f5dc;"></span>
                                                <span class="color-name">Beige</span>
                                            </label>
                                            <label class="color-option">
                                                <input type="radio" name="color" value="black">
                                                <span class="color-swatch" style="background-color: #333333;"></span>
                                                <span class="color-name">Black</span>
                                            </label>
                                            <label class="color-option">
                                                <input type="radio" name="color" value="white">
                                                <span class="color-swatch" style="background-color: #ffffff; border: 1px solid #ddd;"></span>
                                                <span class="color-name">White</span>
                                            </label>
                                        </div>
                                        <div class="custom-color-section">
                                            <label class="color-option custom-color">
                                                <input type="radio" name="color" value="custom">
                                                <input type="color" id="customColorPicker" value="#d4a574">
                                                <span class="color-name">Custom Color</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>Pricing & Inventory</h2>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Price *</label>
                                        <input type="text" id="productPrice" value="$45.00" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Compare at Price</label>
                                        <input type="text" id="comparePrice" placeholder="$0.00">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Stock Quantity</label>
                                        <input type="number" id="stockQuantity" value="25" min="0">
                                    </div>
                                    <div class="form-group">
                                        <label>Low Stock Alert</label>
                                        <input type="number" id="lowStockAlert" value="5" min="0">
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>Shipping & Delivery</h2>
                                <div class="form-group">
                                    <label>Weight (kg)</label>
                                    <input type="number" id="productWeight" value="0.5" step="0.1" min="0">
                                </div>
                                <div class="form-group">
                                    <label>Delivery Region</label>
                                    <select id="deliveryRegion">
                                        <option value="local" selected>Local</option>
                                        <option value="national">National</option>
                                        <option value="international">International</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Delivery Cost</label>
                                    <input type="text" id="deliveryCost" value="$5.00">
                                </div>
                            </div>

                            <div class="form-section">
                                <h2>Product Status</h2>
                                <div class="form-group">
                                    <label>Status</label>
                                    <select id="productStatus">
                                        <option value="active" selected>Active</option>
                                        <option value="draft">Draft</option>
                                        <option value="pending">Pending Review</option>
                                        <option value="archived">Archived</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="featuredProduct">
                                        <span class="checkmark"></span>
                                        Featured Product
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="allowBackorders" checked>
                                        <span class="checkmark"></span>
                                        Allow backorders when out of stock
                                    </label>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="cancel-btn" onclick="cancelEdit()">Cancel</button>
                                <button type="button" class="save-draft-btn" onclick="saveDraft()">Save as Draft</button>
                                <button type="submit" class="save-btn">Save Changes</button>
                            </div>
                        </form>
                    </div>

                    <div class="product-preview-section">
                        <div class="preview-card">
                            <h3>Product Preview</h3>
                            <div class="preview-image">
                                <img src="https://images.unsplash.com/photo-1586495777744-4413f21062fa?w=200&h=200&fit=crop" alt="Product Preview" id="previewImage">
                                <button class="change-image-btn" onclick="changeImage()">
                                    <i class="fas fa-camera"></i>
                                    Change Image
                                </button>
                            </div>
                            <div class="preview-details">
                                <h4 id="previewName">Handwoven Basket</h4>
                                <p class="preview-price" id="previewPrice">$45.00</p>
                                <p class="preview-description" id="previewDescription">Beautiful handwoven basket made from natural materials...</p>
                                <div class="preview-status">
                                    <span class="status active" id="previewStatus">Active</span>
                                </div>
                            </div>
                        </div>

                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <button class="action-btn" onclick="duplicateProduct()">
                                <i class="fas fa-copy"></i>
                                Duplicate Product
                            </button>
                            <button class="action-btn" onclick="viewAnalytics()">
                                <i class="fas fa-chart-line"></i>
                                View Analytics
                            </button>
                            <button class="action-btn" onclick="shareProduct()">
                                <i class="fas fa-share"></i>
                                Share Product
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Get product ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id') || 'HB001';

        // Sample product data
        const productData = {
            'HB001': {
                name: 'Handwoven Basket',
                sku: 'HB001',
                price: '$45.00',
                description: 'Beautiful handwoven basket made from natural materials. Perfect for storage or decoration.',
                category: 'home-decor',
                size: 'medium',
                color: 'brown',
                status: 'active',
                image: 'https://images.unsplash.com/photo-1586495777744-4413f21062fa?w=200&h=200&fit=crop',
                stock: 25,
                weight: 0.5
            }
        };

        // Load product data on page load
        window.onload = function() {
            loadProductData();
            updatePreview();
        };

        function loadProductData() {
            const product = productData[productId];
            if (product) {
                document.getElementById('productName').value = product.name;
                document.getElementById('productSku').value = product.sku;
                document.getElementById('productDescription').value = product.description;
                document.getElementById('productPrice').value = product.price;
                document.getElementById('productCategory').value = product.category;
                document.getElementById('productSize').value = product.size;
                document.getElementById('productStatus').value = product.status;
                document.getElementById('stockQuantity').value = product.stock;
                document.getElementById('productWeight').value = product.weight;
                
                // Set color
                const colorRadio = document.querySelector(`input[name="color"][value="${product.color}"]`);
                if (colorRadio) colorRadio.checked = true;
            }
        }

        function updatePreview() {
            const name = document.getElementById('productName').value;
            const price = document.getElementById('productPrice').value;
            const description = document.getElementById('productDescription').value;
            const status = document.getElementById('productStatus').value;

            document.getElementById('previewName').textContent = name;
            document.getElementById('previewPrice').textContent = price;
            document.getElementById('previewDescription').textContent = description.substring(0, 100) + '...';
            
            const statusElement = document.getElementById('previewStatus');
            statusElement.textContent = status.charAt(0).toUpperCase() + status.slice(1);
            statusElement.className = `status ${status}`;
        }

        // Update preview when form changes
        document.getElementById('productName').addEventListener('input', updatePreview);
        document.getElementById('productPrice').addEventListener('input', updatePreview);
        document.getElementById('productDescription').addEventListener('input', updatePreview);
        document.getElementById('productStatus').addEventListener('change', updatePreview);

        // Form submission
        document.getElementById('editProductForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show loading state
            const submitBtn = document.querySelector('.save-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Saving...';
            submitBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                alert('Product updated successfully!');
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // Redirect back to listings
                window.location.href = 'listings.html';
            }, 1500);
        });

        function saveDraft() {
            alert('Product saved as draft!');
            document.getElementById('productStatus').value = 'draft';
            updatePreview();
        }

        function cancelEdit() {
            if (confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')) {
                window.location.href = 'listings.html';
            }
        }

        function previewProduct() {
            window.open('view-product.html?id=' + productId, '_blank');
        }

        function deleteProduct() {
            if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
                alert('Product deleted successfully!');
                window.location.href = 'listings.html';
            }
        }

        function duplicateProduct() {
            alert('Product duplicated! You can now edit the copy.');
            // In a real app, this would create a copy and redirect to edit it
        }

        function viewAnalytics() {
            window.location.href = 'analytics.html?product=' + productId;
        }

        function shareProduct() {
            const url = window.location.origin + '/product/' + productId;
            navigator.clipboard.writeText(url).then(() => {
                alert('Product URL copied to clipboard!');
            });
        }

        function changeImage() {
            // In a real app, this would open a file picker
            alert('Image upload functionality would be implemented here.');
        }

        // Notification system
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        function markAllAsRead() {
            const unreadItems = document.querySelectorAll('.notification-item.unread');
            unreadItems.forEach(item => {
                item.classList.remove('unread');
            });
            
            const badge = document.querySelector('.notification-badge');
            badge.style.display = 'none';
            
            document.getElementById('notificationDropdown').style.display = 'none';
        }

        // Close notification dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const notifications = document.querySelector('.notifications');
            const dropdown = document.getElementById('notificationDropdown');
            
            if (!notifications.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });

        document.getElementById('notificationDropdown').addEventListener('click', function(event) {
            event.stopPropagation();
        });
    </script>
</body>
</html>